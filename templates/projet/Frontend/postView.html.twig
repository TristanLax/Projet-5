{# templates/projet/Frontend/postView.html.twig #}
{% extends 'base.html.twig' %}


{% block title %} Message {% endblock %}


{% block body %}

        
        <div class="row">

            {% if vote == false and app.user %}

                <a href="{{ path('post.vote', {id: post.id}) }}" class="btn btn-primary">Voter pour ce post</a>

            {% elseif vote == true %}

                <a href="{{ path('post.unvote', {id: post.id}) }}" class="btn btn-primary">Annuler mon vote</a>

            {% else %}

                <p>Veuillez vous connecter pour pouvoir voter !</p>

            {% endif %}

            <div class="col-lg-12 text-center">
                <h3>{{ post.title }}</h3>
                <div class="col-lg-12">
                    <img src="{{ vich_uploader_asset(post, 'mainImage') }}" width="50%" alt="">
                </div>
                    <div class="col-lg-4">
                        <div class="row flex justify-content-start flex-wrap">
                        {% for picture in post.pictures %}
                            <div class="col-lg-12">
                                <img src="{{ vich_uploader_asset(picture, 'imageFile') }}" width="50%" alt="">
                            </div>
                        {% endfor %}
                        </div>
                    </div>
                <p>{{ post.content }}</p>
            </div>
        </div>

            <div class="row">
            <div class="col-lg-12">
                {% if app.user %}
                <a class="btn btn-primary" href="{{ path('comment.add', {id: post.id}) }}">Ecrire un commentaire</a>
                {% endif %}

                {% for comment in post.comments %}

                    <div class="col-lg-12">
                        <div class="col-lg-12 comment">

                        <div><p>Réponse écrite par : {{ comment.author.username }}</p></div>
                        <div><p>{{ comment.content }}</p></div>

                            {% if app.user  %}

                                <a href="{{ path('comment.report', {id: comment.id}) }}" class="btn btn-primary">Signaler ce commentaire</a>

                            {% elseif app.user %}

                                <p>Vous avez déjà signalé ce post !</p>

                            {% endif %}

                        </div>
                    </div>

                {% endfor %}

            </div>

        </div>


{% endblock %}